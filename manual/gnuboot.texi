\input texinfo @c -*-texinfo-*-
@c %**start of header
@setfilename gnuboot.info
@include version.texi
@settitle GNU Boot @value{VERSION}

@c Define a new index for options.
@defcodeindex op
@c Combine everything into one index (arbitrarily chosen to be the
@c concept index).
@syncodeindex op cp
@c %**end of header

@copying

Copyright @copyright{} 2024 Denis 'GNUtoo' Carikli.

Copyright @copyright{} 2024 Adrien 'neox' Bourmault.

@quotation
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
@end quotation
@end copying

@c +-----------------------------------------------------------------+
@c |                             Macros                              |
@c +-----------------------------------------------------------------+

@macro cardreaderPCIe

The internal SD card reader is known not to work with GNU Boot but it
works with Linux. This means that you cannot boot a distribution from
an SD card or a microSD card with the internal SD card reader. However
once booted, Linux has full access to the SD card and it can read very
low level technical information about the cards (like their serial
number, vendor, etc) or support SD peripherals (like TV tunners, etc).

@end macro @c cardreaderPCIe

@macro cardreaderUSB

The internal SD card reader is known to work with GNU Boot and
Linux. This means that you can boot a distribution from an SD card or
a microSD card with a microSD to SD adapter. However it only supports
cards that store data (and not TV Tunners, etc) and it cannot read
very low level technical information about the cards (like their
serial number, vendor name, etc).

@end macro @c cardreaderUSB

@macro computerWithSlowUSBKeyboard

At the moment, USB keyboards are extremely slow in the GRUB provided by
GNU Boot in its GRUB images. PS/2 Keyboard seems to work fine, so it is
strongly recommended to get a PS/2 keyboard or try to see if some USB to
PS2 adapters can work. A PS/2 keyboard was tested and worked fine when
connected on the purple PS/2 connector.

@end macro @c computerWithSlowUSBKeyboard

@macro experimentalComputer

The support for this computer is experimental. @xref{Experimental
support for some computers} for what it means.

@end macro @c experimentalComputer

@macro fastestxeightysixcomputer

This computer can have 32 cores and 256 GiB of RAM, so it is the most
powerful x86 computer that can boot with free software. More x86
recent computers require nonfree software to boot.

It also exist more powerful computers that can boot with free
software, but the support for fully free distribution is either
experimental or non-existent depending on the computer. In addition
these more powerful computers are much more expensive, limiting their
reach to organizations or individuals with enough money to buy them
(some people in the free software community have such computers, but
not a lot of people).

@end macro @c fastestxeightysixcomputer

@c +-----------------------------------------------------------------+
@c |                          End of macros                          |
@c +-----------------------------------------------------------------+

@dircategory Kernel
@direntry
* GNU Boot: (gnuboot).                 Boot software distribution
@end direntry

@titlepage
@title GNU Boot manual (version @value{VERSION})
@author GNU Boot Contributors (@email{gnuboot@@gnu.org})
@page
@vskip 0pt plus 1filll
@insertcopying
@end titlepage

@contents


@ifnottex
@node Top
@top GNU Boot

This manual is for GNU Boot version @value{VERSION}.
@end ifnottex

@menu
* Overview::					General purpose and information.
* Supported hardware and configurations::
* Flash programmers::
* Installing or upgrading GNU Boot images::
* Using GNU Boot::
* Maintenance and repairations::
* Building GNU Boot from source::
* Helping GNU Boot::				How to contribute to GNU Boot
* GNU Free Documentation License::		Copying and sharing this documentation.
* Concept index::				Index of concepts.

@detailmenu
 --- The Detailed Node Listing ---

Overview

* What is GNU Boot::
* Why free boot software is important::
* Why use GNU Boot::
* Other 100% free boot software distributions::

Supported hardware and configurations

* Supported computers::
* Supported computer parts and peripherals::
* Supported operating systems::
* GNU Boot images::

Flash programmers

* Practical freedoms with flash programmers::
* Setup and components needed to use a flash programmer::
* Flash chip package::
* Known issues with flash programmers::
* Supported flash programmers::

Installing or upgrading GNU Boot images

* Installation and upgrade instructions::

Using GNU Boot

* Using GNU Boot with QEMU::
* Security features::

Maintenance and repairations

* Replacing the boot flash on a desktop@comma{} server or workstation::

Building GNU Boot from source

* Authenticating the GNU Boot source code::

Helping GNU Boot

GNU Free Documentation License

Concept index

@end detailmenu
@end menu

@node    Overview
@chapter Overview

This chapter will explain what is GNU Boot, and how it compares with
somewhat similar projects.

@node    What is GNU Boot
@section What is GNU Boot

GNU Boot is a boot software distribution. What this means will be
explained below.

@node       boot software
@subsection boot software
@cindex @acronym{BIOS, Basic Input/Output System}
@cindex @acronym{UEFI, Unified Extensible Firmware Interface}
@cindex boot flash
@cindex boot software
@cindex flash chip
@cindex flash memory

When you boot a computer, you can sometimes can see a screen that
looks like that:

@verbatim
+--------------------------------------------------------------------+
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                        [ Some company Logo ]                       |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
|                                                                    |
| Press F2 for BIOS setup, Press F12 for the startup menu.           |
+--------------------------------------------------------------------+
@end verbatim

This screen is produced by software that is often called
@acronym{BIOS, Basic Input/Output System} or @acronym{UEFI, Unified
Extensible Firmware Interface}. We refer to this type of software as
boot software.

The goal of this software is to initialize the hardware of the
computer and load an operating system (like GNU/Linux, Windows, or
macOS). GNU Boot can replaces this software on some computers.

Like all software, this boot software has to be stored somewhere.

Unlike the operating system which is typically stored on data storage
devices people are familiar with (like @acronym{SSD, Solid State
Drive} or a hard disks, USB keys, etc), the boot software is stored on
a very different kind of data storage device.

It is stored inside a chip that is inside the computer mainboard.
People and technical documentation often call this chip the @dfn{boot
flash} because it is stores the boot software, and also because it is
a @dfn{flash chip} which is a chip that stores data and that is built
with a semiconductor technology called flash (see
@uref{https://en.wikipedia.org/wiki/Flash memory,the Wikipedia article
on flash memory} for more details on the technology).

Here is a picture of this boot flash on the mainboard of a ThinkPad
X200:

@image{images/SOIC-16,6in,, Picture of the boot flash of the ThinkPad X200
mainboard.}

@sp 1

Boot software (like @acronym{BIOS, Basic Input/Output System},
@acronym{UEFI, Unified Extensible Firmware Interface} or GNU Boot)
exist for a variety of technical reasons:

@itemize

@item The operating systems require certain hardware components like the
@acronym{RAM, Random Access Memory} to already work when they are
started.

@item The operating system is stored on a storage device(s) (like
@acronym{SSD, Solid State Drive}, hard disks, etc) and part of it needs to be
loaded inside the @acronym{RAM, Random Access Memory} to
work. Something has to do the loading, and this is done in software
for flexibility and/or efficiency reasons.

@item Finally, certain hardware components cannot be auto-detected and
something needs to tell the operating system what drivers to load,
which which settings.

@end itemize

GNU Boot provides such software. It enables to replace nonfree boot
software (typically nonfree @acronym{BIOS, Basic Input/Output System}
or @acronym{UEFI, Unified Extensible Firmware Interface}) on some
computers.

@node       distribution
@subsection distribution

GNU Boot a distribution of boot software: like GNU/Linux distributions
(like Trisquel), it reuses various software to produce something that
can be installed.

However the scope of GNU Boot is more limited than GNU/Linux
distributions as it only reuses boot software like Coreboot or GRUB to
produce something that replaces nonfree @acronym{BIOS, Basic
Input/Output System} or @acronym{UEFI, Unified Extensible Firmware
Interface}.

@node    Why free boot software is important
@section Why free boot software is important

Freedom is important in general, and running nonfree software has
negative consequences regardless of the type of software (game, boot
software, operating system, driver, etc).

@sp 1

Here are some examples of common issues for nonfree boot software:

@itemize

@item Since the boot software loads the operating system, it
can potentially modify it in a malicious way. In most cases part of
the boot software also continues to run once the operating system is
started. Because of that and, and because of the way the hardware and
boot software run, the boot software can also do such modification at
any time. If the boot software is nonfree, it is way harder to find
and remove malicious code (it's even impossible to remove in some
cases), and there is no way to make sure that there is none left. For
instance many nonfree boot software where shipped with the CompuTrace
malware (which was advertised as an anti-theft security feature).

@item Vendors of various hardware components have to collaborate together
to provide updates for nonfree Boot software, so in practice
they decide when updates are done. So if a computer is not sold
anymore, it is unlikely to get update for its Boot software
unless the Boot software uses some free software that can be
updated. Also note that applying nonfree updates comes with huge risk
as we don't know what's inside the updates. Hardware vendors who
provide the updates also have an incentive to make things worse for
the users, so they would be pushed to buy new devices.

@item Some nonfree Boot software restrict what you can do with
your computer. For instance they refuse to boot if you changed or
removed some hardware components.

@end itemize

@node    Why use GNU Boot
@section Why use GNU Boot

As explained before GNU boot is just a distribution. So it is also
possible to take the same software that GNU Boot reuses, and to build,
assemble and install it yourself.

However doing that is risky because if something goes wrong, your
computer won't boot anymore.

So the goals of GNU Boot are to:

@itemize

@item Collaborate together to test if GNU Boot releases works fine.

@item Provide documentation to enable easy installation and usage.

@item Limit the amount of work done by GNU Boot and contribute
directly to the software we reuse whenever possible.

@end itemize

GNU Boot also has a long term focus, so it tries not to break users
use cases, and tries as much as possible to fix issues in the projects
it reuses instead of doing workarounds that impact users.

@node       Software freedom when using GNU Boot
@subsection Software freedom when using GNU Boot

Being a GNU package, GNU Boot itself has to be 100% free software.

If you find nonfree software in GNU Boot and/or any source code or
binaries released by GNU Boot, please contact its maintainers by
opening a bug report on its bug tracker at
@url{https://savannah.gnu.org/bugs/?group=gnuboot}.

But that doesn't mean that GNU Boot magically makes everything not
provided by GNU Boot free software. For instance if you install a
nonfree operating system, GNU Boot will try to run it.

In some cases GNU Boot even runs nonfree software not provided by GNU
Boot like nonfree GPU drivers provided by removable GPU
cards. @xref{Supported computer parts and peripherals} for more details
about this issue and how to avoid running such nonfree software.

To address problems like that the @uref{https://www.fsf.org/,Free
Software Foundation} has created the
@uref{https://ryf.fsf.org/,Respect Your Freedom hardware
certification} to list hardware that works with only free software
(with some very small exceptions for some components, see
@uref{https://ryf.fsf.org/about/criteria, its criteria} for more
details).

In addition there is also
@uref{https://www.fsfla.org/ikiwiki/blogs/lxo/draft/blob-fallacy,The
Blob Fallacy article} or
@uref{https://media.libreplanet.org/u/libreplanet/m/software-enshittification-or-freedom-it-s-not-a-hard-choice,
a video of a presentation about the same issue at LibrePlanet 2024} by
Alexandre Oliva that explains the related freedom issues with nonfree
software provided by the hardware and how they compare with other kind
of freedom issues (nonfree driver, nonfree firmware loaded
automatically by Linux, etc).

If we dig deeper, hardware supported by GNU Boot is also affected by
additional issues. They are less problematic than the rest as the
Respect Your Freedom hardware certification makes exception for these
until we get free software replacements.

All the (mass) storage devices (Hard disks, @acronym{SSD, Solid State
Drive}, USB keys, SD cards, etc) have a builtin nonfree firmware. It
is possible to avoid trusting these nonfree firmware by encrypting
everything that is on these devices. Since we currently lack
instructions on how to do that in this manual, we are looking for help
to do it.

In the case of laptops, there is however something more problematic
for which we have no solution yet. The computers have a builtin
nonfree firmware which handle the keyboard (which is extremely
problematic), and various tasks related to power management (setting
up the right voltages at boot, managing the battery, cutting power to
the WiFi, the power management beeps, etc).

In that case the way to go would be to find a way to make sure that
people do work on addressing the issue by writing a free firmware to
replace the nonfree firmware, and by finding a way to upgrade the
nonfree firmware to a free one.

The
@uref{https://www.gnu.org/philosophy/free-hardware-designs.html,Free
Hardware and Free Hardware Designs} also has good background on these
topics as in some case hardware and firmware is indistinguishable, and
so this also has consequences on freedom and/or on how to recognize
the most problematic issues, which in turn is a useful tool for
organizing the free software movement at large.

@node       Limitations
@subsection Limitations

GNU Boot is fairly recent and doesn't have an official release
yet.

For the release we plan to have at least some install and upgrade
instructions for some computers and an easy way for users to use GNU
Boot.

Also the latest GNU Boot release candidate was not tested yet with all
the computers it's supposed to support (we badly need help for that).

@node    Other 100% free boot software distributions
@section Other 100% free boot software distributions

The following GNU/Linux distributions should also provide 100% free
boot software but they usually only provide them for computers using
the ARM architecture (which GNU Boot doesn't support yet):

@itemize

@item Parabola

@item PureOS

@item Trisquel

@end itemize

@node       GNU boot and GNU Guix
@subsection GNU boot and GNU Guix

The GNU Guix package manager (which GNU Boot also reuses) also provide
100% free boot software for some ARM computers. However the Guix
packages are updated all the time and the Guix project doesn't provide
any way for users to report that specific ARM computers work fine with
the boot software they provide.

@node       GNU boot and Canoeboot
@subsection GNU boot and Canoeboot

There is also Canoeboot which is a 100% free software boot distribution
similar to GNU Boot. Its goal is to remove nonfree software from
Libreboot.

The main difference between both is that GNU Boot has a longer term
focus.

This has some wide reaching consequences that affect many
areas. Because of that, the next subsubsection will give a few
practical examples to show this in practice rather than trying to be
exaustive.

Also note that the GNU Boot maintainers don't know Canoeboot well
enough as this would require them to spend a lot of time studying its
documentation, source code an testing it and/or using it, to get first
hand knowledge about it, to really evaluate the impact of Canoeboot
choices and compare them to GNU Boot.

So instead, the GNU Boot maintainers relied on a mix of discussion
with Leah Rowe, the Canoeboot maintainer, and their own research, to
get information about Canoeboot.

@node          GNU boot and Canoeboot: features
@subsubsection GNU boot and Canoeboot: features

Compared to GNU Boot, Canoeboot focuses more on having the latest
software, adding additional features not available in the projects it
reuses (like modern full disk encryption with GRUB), and it also
supports computers not yet supported by GNU Boot.

In both cases this is sometimes done by modifying the project it
reuses without contributing back the changes. While this saves a lot
of time in the short and medium term, and that things seems to work
as, according to its maintainer, Canoeboot and/or its community do
test all these changes, it also makes it harder to keep these extra
features and/or computers in the long run.

As the project being reused and everything around evolve, the
modifications need to be maintained and sometimes re-made to work with
newer versions of the project being reused.

The difficulty to keep these changes increase with the amount of such
changes, their size and complexity, or the speed of the evolution of the
projects being reused.

Weather or not this will turn out to be an issue is hard to tell in
advance because there are a lot of unknowns.

Note that GNU Boot also has similar issues but instead of adding more
modifications it tries to reduces their amount.

@node          GNU boot and Canoeboot: fixes
@subsubsection GNU boot and Canoeboot: fixes

Another significant difference between both projects is that Canoeboot
seems to have fixed a lot of issue since Libreboot 20220710 (the
latest fully Libreboot version), while GNU Boot took a completely
different approach: its goal is to re architecture many things, step
by step, while taking great care of not breaking what worked in
Libreboot 20220710. For instance GNU Boot is switching to GNU Guix to
build its software and it is also making a proper manual.

In the long run this enables GNU boot to solve more complex problem
that would be really hard or impossible to solve with the current
design of Canoeboot (like the ability to blindly trust the images
built by someone else, or the ability to build and modify your own
images faster, more easily and with way less risk) or have more
standard documentation in the form of a manual.

But this also means that shorter term fixes are often less good in GNU
Boot because its contributors focus more on longer term fixes like the
migration to GNU Guix.

The real impact of all that is hard to evaluate in the usage of
Canoeboot or GNU Boot in the short term as GNU Boot also changes less
often than Canoeboot, and GNU Boot reports tests on its status page,
while there is no such things for Canoeboot (however if things don't
work people can also report bugs).

As for the impact on the documentation, it is also somewhat similar:
In GNU Boot, the information is being moved from the website to the
manual, to be more consistent and easier to understand, but this is
also done at the expense of the website which has fewer contributions.

In Canoeboot the website is being improved instead. And here too, GNU
Boot also has tracks the documentation through a scary banner on the
website pages that weren't reviewed.

In both cases this can enables GNU Boot to find issues and revisit
many things to improve a lot the quality in the longer run, at the
expense of quicker fixes and improvements. Canoeboot also does and/or
did that in one way or another but there is no clear separation of
what was reviewed or not.

@node          GNU boot and Canoeboot: dependence on upstream
@subsubsection GNU boot and Canoeboot: dependence on upstream

Another difference is that nowadays the code and website of Canoeboot
are closer to the current Libreboot than GNU Boot is.

In practice it means that a lot of the work from Libreboot is reusable
in Canoeboot with way less effort, but the downside is also that it is
harder to tailor Canoeboot to the needs and habits of users and
contributors that don't want to run nonfree software.

An example is that at the time of writing, the most well tested
distributions to build Canoeboot are not endorsed by the
@uref{https://www.fsf.org/,Free Software Foundation}.

It could be fixed but this would require either the maintainer or
dedicated contributors to test everything with these distributions,
and in this case, Canoeboot would not rely on the testing already done
in Libreboot with non-endorsed distributions.

Another way would be to require Libreboot to test everything with
endorsed distributions as well, or to use endorsed distributions that
are as close as possible to the most well tested distributions to
build Canoeboot.

In GNU Boot, there is the opposite situation: the project only
requires to test with endorsed distribution(s), but it is also
possible to install the most supported ones on top of another
distribution with Guix's debootstrap (but this is not documented). The
longer term fix in GNU Boot is to build everything in Guix, which can
be installed more easily on top of many distributions.

This difference of distributions support is reflected in the
documentation of both projects as well, which assumes that users use
or want to use certain distributions.

Note that the pages of the GNU Boot website that weren't reviewed (and
that have a scary warning because of that) might still assume that
users use nonfree distributions.

@node       Software freedom when using other 100% free distributions
@subsection Software freedom when using other 100% free distributions

Apart from Parabola for ARM computers that only officially support
computers that can boot with free software, all other distributions,
which also includes Parabola for x86 computers also support computers
that boot with nonfree software: these computers come with nonfree
software pre-installed and these distributions reuse that software to
boot.

So the fact that a computer is supported by these distributions does
not indicate that the computer can boot with fully free software.

Here are some examples for the GNU/Linux distributions. They all
provide packages that only work with nonfree software that is already
on the computer.

@multitable  {Trisquel 11 (aramo)}          {u-boot-rpi-arm64}    {Works only with nonfree Raspberry PI bootloader}

@item        Distribution               @tab Package          @tab Support

@item        Guix                       @tab u-boot-rpi-arm64 @tab Works only with nonfree Raspberry PI bootloader

@item        Parabola (x86)             @tab tp_smapi         @tab Works only with nonfree ThinkPad BIOS

@item        PureOS                     @tab u-boot-rpi       @tab Works only with nonfree Raspberry PI bootloader

@item        Trisquel 11 (aramo)        @tab u-boot-rpi       @tab Works only with nonfree Raspberry PI bootloader

@end multitable

As for Canoeboot, since June 2025, it also supports computers that
boot with nonfree software. This nonfree software runs in a separate
computer within Intel computers that is called Management Engine.

On supported computers, this nonfree software, has access to the
network and can take full control of the computer at any time (even
once booted or when the computer seems to be powered off). This is
even advertised by the Intel (the CPU manufacturer) as a feature to
more easily control computers remotely.

See the
@uref{https://www.fsf.org/blogs/sysadmin/the-management-engine-an-attack-on-computer-users-freedom,
The Intel Management Engine: an attack on computer users' freedom}
article has more information on this issue.

To limit the damage, Canoeboot kindly asks this nonfree software to
not run the most problematic part of code (this includes the code that
is responsible for the remote control) but also doesn't remove any of
this code. Since this operating system is nonfree it is hard to really
understand the impact of doing that.

You may also be able to completely remove the most problematic part of
this code yourself with
@uref{https://github.com/corna/me_cleaner,me_cleaner}, and the
Canoeboot project also provides instructions to do that, but it is not
possible to remove all of this nonfree code (otherwise Canoeboot would
have done that). Here too it is hard to really understand the impact
of running the remaining nonfree code to boot the computer.

Really understanding the impact is extremely complex or impossible,
basically because the code is nonfree.

If need more details, there is some documentation on what these
settings are supposed to do, like the
@uref{https://web.archive.org/web/20170828150536/http://blog.ptsecurity.com/2017/08/disabling-intel-me.html,
Disabling Intel ME 11 via undocumented mode} article by Positive
Technologies, or the source code, documentation, bug reports and
contributions of the me_cleaner project. All that shows that some
nonfree code still run at boot, and all the affected computers don't
necessarily run the exact same nonfree code, and research often
analyze specific versions of this nonfree code, and not necessarily
the code that you might be running if you use such computers with
Canoeboot. In addition research tend to analyze specific part of the
code only and not everything.

Because of that, really knowing the danger of running the nonfree
software code that is required to boot the computer is almost
impossible, because even if you do a lot of research yourself, this
would still need to be somehow reviewed by peers to get a bit more
assurance it doesn't contain huge mistakes.

So given the capabilities that kind of hardware and software has, it
is a good idea to be extra cautious. So it would be best to avoid
relying on computers with such issues if you can.

Note that this issue is not limited to Intel, as recent CPU made by
AMD also have somewhat similar issues. Most smartphones also have a
similar issues, and even some ARM computers like the Raspberry PI also
have a similar issue. See the
@uref{https://web.archive.org/web/20220531105341/https://ownyourbits.com/2019/02/02/whats-wrong-with-the-raspberry-pi/,Whatâ€™s
wrong with the Raspberry Pi} for more details on the Raspberry Pi.

@node    Supported hardware and configurations
@chapter Supported hardware and configurations

@node    Supported computers
@section Supported computers

For now, GNU Boot only provides images that can be installed on the
following computers:

@itemize

@item Acer G43T-AM3
@item Apple MacBook 1.1
@item Apple MacBook 2.1
@item Apple iMac 5,2
@item Asus KCMA-D8 (experimental)
@item Asus KFSN4-DRE (experimental)
@item Asus KGPE-D16 (experimental)
@item Gigabyte D945GCLF2D
@item Gigabyte GA-G41M-ES2L
@item Intel D410PT
@item Intel D510MO
@item Intel D945GCLF
@item Lenovo ThinkPad R400
@item Lenovo ThinkPad R500
@item Lenovo ThinkPad T400
@item Lenovo ThinkPad T400S
@item Lenovo ThinkPad T500
@item Lenovo ThinkPad T60 with intel GPU
@item Lenovo ThinkPad W500
@item Lenovo ThinkPad X200
@item Lenovo ThinkPad X200S
@item Lenovo ThinkPad X200T
@item Lenovo ThinkPad X301
@item Lenovo ThinkPad X60
@item Lenovo ThinkPad X60T
@item Lenovo ThinkPad X60s
@item Libiquity Taurinus X200
@item Qemu PC (i440FX)
@item Technoethical D16 (experimental)
@item Technoethical T400
@item Technoethical T400s
@item Technoethical T500
@item Technoethical X200
@item Technoethical X200s
@item Technoethical X200 Tablet (X200T)
@item Vikings ASUS KCMA D8 mainboard and workstation (experimental)
@item Vikings ASUS KGPE D16 mainboard (experimental)
@item Vikings X200

@end itemize

However as GNU Boot is still relatively new, we lack installation and
upgrade instructions for most of these computers.

Also not all are well tested, so it's a good idea to look on the GNU
Boot website, on the status page (
@url{https://www.gnu.org/software/gnuboot/status.html}) for up to
date result of tests by GNU Boot users and contributors.

@node       Refurbished and/or modified computers
@subsection Refurbished and/or modified computers

Note that, while they are very similar, a Lenovo ThinkPad X200 is not
the same thing than a Technoethical X200. This is because vendors like
Technoethical, Vikings, and others sometime modify the hardware and/or
software of the computers they sell. Note that some of these vendors
sold different computer models and not just the X200.

At least one of these vendor (Minifree Ltd) is known to have increased
the boot flash size, and multiple vendors are also known to have
modified the boot software images they shipped to make sure that the
builtin Ethernet controller hardware address (also known as
@acronym{MAC address,Medium Access Control address}) was the same than
on the sticker below the computer.

Since these modifications are useful but that they can have impacts in
multiple areas (installation or repair instructions, flash chip
programmer compatibility, etc), we chose to take into account these
differences to best support these potentially modified computers, and
the way we did it is by considering the Lenovo ThinkPad X200 and the
Technoethical X200 to be two distinct computers.

Because of that we also need help from the vendors and/or users of
these modified computers to tell us or help us find what was modified
on these computers, to better support them.

@node       Experimental support for some computers
@subsection Experimental support for some computers

The support for the following computers is experimental:

@itemize
@item Asus KCMA-D8
@item Asus KFSN4-DRE
@item Asus KGPE-D16
@item Technoethical D16
@item Vikings ASUS KCMA D8 mainboard and workstation
@item Vikings ASUS KGPE D16 mainboard
@end itemize

If you don't have any of these computers, you can simply skip this
subsection.

All of these computers use similar chips. Their future is uncertain
because of several issues:

@itemize

@item They are no longer supported by Coreboot.
      This makes it difficult continue supporting it over time.
      In practice they uses an older Coreboot version and the code doesn't
      build on distributions like Parabola because of that. For now the
      code can still be built on Trisquel 11 (aramo).

@item The code that initialize the RAM works accidentally and it
      is not reliable. In practice this means that the compatibility RAM
      modules is very difficult to know in advance. For instance going up to
      the maximum amount of RAM (like 256 GiB of RAM on a KGPE-D16) only works
      with very specific RAM modules.

      Which modules work and can still be bought at regular prices are also
      kept secret to prevent companies from buying them all and increasing
      the prices.

      In addition sometimes rebooting don't work, and powering the
      mainboard does not always work (sometimes we need to try several times
      for that to work). Weather that works or not can also be dependent on
      the room temperature. In addition once running the computer for very
      long period of time can result in a crash at some point, which
      requires rebooting it.

@end itemize

Despite all that, some organizations like the FSF, GNU or Libre en
Communs manage to run infrastructure with computers that have these
issues. But this requires specific know how or workarounds.

For instance if you want to use these computers as remote servers, you
will need to know how to build a system that can reboot the computer
remotely even if it is crashed, and also make sure that the system you
build doesn't depend on nonfree software.

In contrast, such knowledge is not required for running GNU Boot on
well supported computers like a ThinkPad X200, even if they are used
as servers.

Despite all these issues, these computer that are affected by such
issues are still (badly) supported by GNU Boot because of historic
reasons: in November 2022, Libreboot began to include non-libre code,
and because of that GNU Boot was created to continue providing a fully
free boot distribution with the same spirit of former Libreboot
releases.

Since Libreboot already supported this computer and that people and
organization do use them, including key contributors to GNU Boot, it
made sense and still makes sense to support these mainboard.

For instance the GNU Boot build server runs on a @acronym{VM,virtual
machine} provided by Libre en Communs which runs on a KGPE-D16 with
GNU Boot, and the KGPE-D16 is affected by these issues.

And neox is also involved in running all that on the Libre En Communs
side so not supporting that mainboard in GNU Boot would also means
that neox would have less time for GNU Boot due to the duplication of
work.

All the above makes it really important to fix these issue once for
good, and several things can be done to really do that:

@itemize

@item neox reverse engineered the RAM controller hardware of the KGPE-D16 and
      wrote an academic paper on it that will be published under a free
      license. People with related skills can help by requesting a copy to neox
      and reviewing it.

@item another way to help is to find people that have the skills
      and the time to write a proper RAM initialization code and bring back
      this mainboard in Coreboot. GNU Boot may be able to get funding for that.

@end itemize

In addition fixing these issue will also enable to have RAM
initialization code that we have the full control of: most computers
out there put unknown values in the RAM controller and have algorithms
to then tune the RAM settings until something acceptable is reached.

But the goal of neox's paper is to really document the hardware, to
enable to write extremely reliable initialization code. This can also
open the door for other optimizations to improve performance,
reliability (make it work with a bigger temperature range), security,
etc.

These optimizations are not possible for all the other computers
supported by GNU Boot, as it would require to do the same kind of work
neox did to also reverse engineer the RAM controller of these other
computers.

@node       Asus KGPE-D16 (experimental)
@subsection Asus KGPE-D16 (experimental)

Here are some details on this computer:

@multitable  {Boot flash:} {Non-removable (soldered)}
@item        Vendor:       @tab Asus
@item        Product:      @tab KGPE-D16
@item        Max RAM:      @tab 256 GiB (with specific modules)
@item        CPU:          @tab 2 CPUs, Removable: G34 socket
@item        Boot flash:   @tab Removable: DIP-8 socket
@end multitable

@fastestxeightysixcomputer
@experimentalComputer

@node          Asus KGPE-D16: How to build a computer with this mainboard.
@subsubsection Asus KGPE-D16: How to build a computer with this mainboard.

@computerWithSlowUSBKeyboard

@node       Lenovo ThinkPad X60
@subsection Lenovo ThinkPad X60

Here are some details on this computer:

@multitable  {Boot flash:} {Non-removable (soldered)}
@item        Vendor:       @tab Lenovo
@item        Product:      @tab ThinkPad X60
@item        Max RAM:      @tab < 4GiB
@item        CPU:          @tab Non-removable (soldered)
@item        Boot flash:   @tab Non-removable (soldered)
@end multitable

@node          Lenovo ThinkPad X60 builtin card reader
@subsubsection Lenovo ThinkPad X60 builtin card reader

@cardreaderPCIe

@node       Lenovo ThinkPad X60s
@subsection Lenovo ThinkPad X60s

Here are some details on this computer:

@multitable  {Boot flash:} {Non-removable (soldered)}
@item        Vendor:       @tab Lenovo
@item        Product:      @tab ThinkPad X60s
@item        Max RAM:      @tab < 4GiB
@item        CPU:          @tab Non-removable (soldered)
@item        Boot flash:   @tab Non-removable (soldered)
@end multitable

@node          Lenovo ThinkPad X60s builtin card reader
@subsubsection Lenovo ThinkPad X60s builtin card reader

@cardreaderPCIe

@node       Lenovo ThinkPad X60T
@subsection Lenovo ThinkPad X60T

Here are some details on this computer:

@multitable  {Boot flash:} {Non-removable (soldered)}
@item        Vendor:       @tab Lenovo
@item        Product:      @tab ThinkPad X60T
@item        Max RAM:      @tab < 4GiB
@item        CPU:          @tab Non-removable (soldered)
@item        Boot flash:   @tab Non-removable (soldered)
@end multitable

@node          Lenovo ThinkPad X60T builtin card reader
@subsubsection Lenovo ThinkPad X60T builtin card reader

@cardreaderPCIe

@node       Lenovo ThinkPad X200
@subsection Lenovo ThinkPad X200

Here are some details on this computer:

@multitable  {Max RAM}    {ThinkPad X200}
@item        Vendor:      @tab Lenovo
@item        Product:     @tab ThinkPad X200
@item        Max RAM:     @tab 8GiB
@item        CPU:         @tab Non-removable (soldered)
@item        Boot flash:  @tab Non-removable (soldered)
@end multitable

@node          Lenovo ThinkPad X200 builtin boot flash
@subsubsection Lenovo ThinkPad X200 builtin boot flash

The ThinkPad X200 originally had one of these boot flash:

@itemize
@item Macronix MX25L6405D (8MiB, SOIC-16)
@item Winbond  W25X64     (8MiB)
@item Macronix MX25L3205D (4MiB)
@item Atmel    AT25DF321  (4MiB)
@end itemize

@node          Lenovo ThinkPad X200 builtin CPU
@subsubsection Lenovo ThinkPad X200 builtin CPU

The ThinkPad X200 has one of these CPUs:

@itemize
@item Intel Core 2 Duo P8400 (64bit, 2 cores, 2.26GHz)
@item Intel Core 2 Duo P8600 (64bit, 2 cores, 2.40GHz)
@item Intel Core 2 Duo P8700 (64bit, 2 cores, 2.53GHz)
@item Intel Core 2 Duo P8800 (64bit, 2 cores, 2.66GHz)
@end itemize

@node          Lenovo ThinkPad X200 builtin card reader
@subsubsection Lenovo ThinkPad X200 builtin card reader

@cardreaderUSB

@node       Lenovo ThinkPad X200s
@subsection Lenovo ThinkPad X200s

Here are some details on this computer:

@multitable  {Max RAM}    {ThinkPad X200s}
@item        Vendor:         @tab Lenovo
@item        Product:        @tab ThinkPad X200s
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@node          Lenovo ThinkPad X200s builtin card reader
@subsubsection Lenovo ThinkPad X200s builtin card reader

@cardreaderUSB

@node       Lenovo ThinkPad X200T
@subsection Lenovo ThinkPad X200T

Here are some details on this computer:

@multitable  {Max RAM}    {ThinkPad X200s}
@item        Vendor:         @tab Lenovo
@item        Product:        @tab ThinkPad X200%
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@node          Lenovo ThinkPad X200T builtin card reader
@subsubsection Lenovo ThinkPad X200T builtin card reader

@cardreaderUSB

@node       Libiquity Taurinus X200
@subsection Libiquity Taurinus X200

Here are some details on this computer:

@multitable  {Max RAM}    {ThinkPad X200s}
@item        Vendor:         @tab Libiquity
@item        Product:        @tab Taurinus X200
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@node           Taurinus X200 builtin card reader
@subsubsection  Taurinus X200 builtin card reader

@cardreaderUSB

@node       Technoethical X200
@subsection Technoethical X200

Here are some details on this computer:

@multitable  {Max RAM}    {Technoethical X200}
@item        Vendor:         @tab Technoethical
@item        Product:        @tab X200
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@subsubsection Technoethical X200 builtin card reader

@cardreaderUSB

@node       Technoethical X200s
@subsection Technoethical X200s

Here are some details on this computer:

@multitable  {Max RAM}    {Technoethical X200s}
@item        Vendor:         @tab Technoethical
@item        Product:        @tab X200s
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@subsubsection Technoethical X200s builtin card reader

@cardreaderUSB

@node       Technoethical X200 Tablet (X200T)
@subsection Technoethical X200 Tablet (X200T)

Here are some details on this computer:

@multitable  {Max RAM}    {Technoethical X200T}
@item        Vendor:         @tab Technoethical
@item        Product:        @tab X200T
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@node          Technoethical X200T builtin card reader
@subsubsection Technoethical X200T builtin card reader

@cardreaderUSB

@node       Vikings X200
@subsection Vikings X200

Here are some details on this computer:

@multitable  {Max RAM}    {Technoethical X200s}
@item        Vendor:         @tab Vikings
@item        Product:        @tab X200
@item        Max RAM:        @tab 8GiB
@item        CPU:            @tab Non-removable (soldered)
@item        Boot flash:     @tab Non-removable (soldered)
@end multitable

@node          Vikings X200 builtin card reader
@subsubsection Vikings X200 builtin card reader

@cardreaderUSB

@node    Supported computer parts and peripherals
@section Supported computer parts and peripherals

Most computer parts and peripherals don't have any compatibility issue
with GNU Boot because:

@itemize

@item they either use some standard that is most often already
implemented in the software GNU Boot reuses (storage devices like SATA
drives, USB keyboards, etc),

@item they are not relevant or supported for booting (for instance 3D printers,
cellular network cards, etc, unless people add support for them in GNU
Boot in the future). Until then they are only handled in the operating
system instead (with drivers),

@end itemize

however there is some exceptions as some hardware is non-standard and
still required for booting, these are documented in the subsections
below.

@node       PCI and PCIe cards with software
@subsection PCI and PCIe cards with software
@cindex option ROM
@cindex video BIOS

Some PCI or PCI express cards store software (typically on a flash
chip) that is meant to run by the boot software (typically a
@acronym{BIOS, Basic Input/Output System} or @acronym{UEFI, Unified
Extensible Firmware Interface}). This software is called an option
ROM. When it is on a graphic card, it can also be called a video BIOS.

When using GNU Boot SeaBIOS images, GNU Boot will run option ROMs
reguardless of if they are free or not. Most of the time option ROMs
are nonfree. The GNU Boot GRUB images won't option ROMs at all, so
this is also one of the reasons why SeaBIOS images are reserved for
more advanced users. @xref{GNU Boot images types} on the various
images available.

What option ROMs do depends a lot on the card: GPUs typically contain
a BIOS driver that enable to see something on the screen during boot,
network cards contain code to use the card to boot the computer from
the network, etc.

Sometimes they are not useful. For instance if you don't intend to
boot from the network, you don't need to run code to do that.

And sometimes the functionality provided by option ROMs can even be
very dangerous to use. For instance some SATA controllers option ROMs
contain code that can format disks with some vendor-specific format,
but if you use that, since code is nonfree, if the card breaks, you
end up not being able to read the data on your disks anymore unless
the disk format is reimplemented with free software somehow.

Things are not always bad though, as nonfree option ROMs can sometimes be
replaced with free software like with @uref{https://ipxe.org,iPXE} or
@uref{https://directory.fsf.org/wiki/Sgabios,SGABIOS}.

Beside doing that there are several ways of avoiding to run option
ROMs:

@itemize

@item You can simply use GNU Boot GRUB images and not use GNU
      Boot SeaBIOS images. This will avoid running option ROMs
      completely. This is the simpliest solution and it also gives the
      strongest guarantees as users can't accidentally run option ROMs.

@item You can get computers without PCI /PCIe cards that have builtin
      option ROMs. All the hardware listed in the
      @uref{https://ryf.fsf.org/,Respect Your Freedom hardware
      certification} website should be okay. Another way would be to check
      the cards yourself, but a tutorial on how to do that needs to be
      written.

@item You can backup and erase the nonfree option ROM present in
      these cards with @uref{https://flashprog.org,flashprog} or
      @uref{https://flashrom.org,flashrom}. This could be risky
      to do and it may require to connect a flash chip programmer to these
      cards and even disassemble them in some cases because flashprog or
      flashrom only enable to reprogram very few cards from the computer they
      are connected in. Here we also lack a tutorial on how to do that.

@item You can modify the GNU Boot SeaBIOS images to tell it not
      to run option ROMs. The Free Software Foundation tech team has
      a wiki. In
      @uref{https://savannah.gnu.org/maintenance/fsf/hardware/disable-option-roms-with-cbfstool/,
      the disable option roms with cbfstool article}, they explain how to
      do that.

@end itemize

Note that free software option ROMs do not necessarily need to reside
on PCI or PCIe cards. They can also be added to GNU Boot SeaBIOS
images. Sometimes the same code can be run through other ways like
with iPXE that can be booted from an USB disk and a wide variety of
methods.

@node       Supported GPUs and graphics
@subsection Supported GPUs and graphics

GNU Boot supports the GPUs that are present in the various laptops it
supports with 100% free software. Some consideration apply while
booting (@pxref{GNU Boot images} for more details), but so far once
booted these GPU are known to works well on tested computers.

In addition for the non-laptop computers, it also supports the builtin
AST graphics in the KGPE-D16 and KCMA-D8 with 100% free software, but
this also comes with some limitations: in GNU/Linux it's only possible
to display text but not images, so it's limited to console
applications.

In the case of PCIe GPU / graphics cards, we don't know yet if it
is possible to use them without running nonfree software.

If AMD, ATI, and Nvidia cards work under GNU Boot, it's because GNU
Boot loaded and run the nonfree video BIOS that is present on the
card.

It's possible to prevent the nonfree video BIOS from running and you
can easily confirm that as the display will not work until the Linux
driver is loaded.

The Free Software Foundation tech team has a wiki. In
@uref{https://savannah.gnu.org/maintenance/fsf/hardware/disable-option-roms-with-cbfstool/,
the disable option roms with cbfstool article}, they explains how to
do that.

And in
@uref{https://savannah.gnu.org/maintenance/fsf/hardware/graphics-cards/,
the graphics cards article} they also explain which GPU they tested.

However the Linux driver can also run nonfree software: All the
current AMD, ATI, and Nvidia drivers have code to load and run (a
different) initialization code provided on the card. For ATI and AMD
cards the code that Linux runs is called AtomBIOS.

We don't know yet if there are cases where this code is not run (this
would need to be tested by doing very simple modifications to the
drivers, and the GNU Boot project also welcome help in this area).

@node       Supported external card readers
@subsection Supported external card readers

GNU Boot supports some USB card readers that are viewed as
mass-storage. With all that you can boot on an SD card a microSD card
and it will be viewed like a mass storage USB key.

@pxref{Supported computers}, inside each computer subsection to see
which computers's internal card readers are supported.

@node       Supported serial ports
@subsection Supported serial ports

While the serial ports are not enabled in the default GNU Boot images,
GNU Boot also build debug images with the serial port enabled.

So far only the following computers have debug images with the serial
port enabled:

@itemize
@item Asus KGPE-D16
@item Lenovo ThinkPad T400
@item Lenovo ThinkPad T400S
@item Qemu PC (i440FX)
@item Technoethical T400
@item Technoethical T400s
@item Vikings ASUS KGPE D16 mainboard
@end itemize

If you have a computer supported by GNU Boot that isn't in the list
above, and that you are able to test and recover from non-working
images (@pxref{Practical freedoms with flash programmers} for more
details), you can ask the GNU Boot maintainers to add a debug image
for your computer, and once you tested it we could update the list
above.

To get the logs you can for instance get an USB<->serial adapter and a
Null modem cable or adapter and after installing the picocom package,
you can most of the time use the following command to get the logs:

@example
picocom -b 115200 /dev/ttyUSB0
@end example

For USB<->Serial adapters, the serial port will most of the time be on
/dev/ttyUSB0, but it can change in some configuration (when there are
multiple serial ports, or with some adapters).

@node       Unsupported hardware supported by projects reused by GNU Boot
@subsection Unsupported hardware supported by projects reused by GNU Boot

The following hardware components are supported by software reused by
GNU Boot, but support for them hasn't been enabled yet in GNU Boot:

@itemize
@item Software RAID cards: Some Silicon Image SIL3114 software RAID
      cards are supported by Coreboot but not enabled in GNU Boot.
@item Network interfaces. Projects like iPXE has drivers for many network cards
      and even some Wifi cards typically used with the computers supported by GNU
      Boot and free distributions.
@end itemize

The GNU Boot project needs help to evaluate the impact of enabling
these and welcome contributions in this area.

@node    Supported operating systems
@section Supported operating systems

While GNU Boot should be able to boot almost any GNU/Linux
distribution, but in some cases some configuration might be needed by
the GNU Boot user. The cases that do and don't require configuration
from the user will be documented in @ref{GNU Boot images} below.

Even if some cases require some configuration, GNU Boot makes sure to
provide at least one way to boot free GNU/Linux distributions (see
@url{https://www.gnu.org/distros/} for more information on these
distributions) without the need to configure anything in order to make
it possible for less technical users to use computers with GNU Boot,
and even reinstall the GNU/Linux distribution without needing to do
anything too complicated.

To make that possible, the GNU Boot contributors that proposes
improvements to the project typically test GNU Boot with free
distributions, and the GNU Boot project even runs automatic tests with
Trisquel 11 (aramo), one of the free distributions to make sure that
it can boot fine without needing any special configuration from the
user.

However sometimes fully free distributions also propose experimental
or non-standard configurations for very specific use cases. For
instance Guix has experimental support for GNU Hurd, an experimental
kernel from the GNU project, and Trisquel supports the Xen kernel,
which is a virtualization solution that not supported by all GNU/Linux
distributions. These configurations are not supported in the official
installers of these distribution and so users are usually aware thaty
they use Xen or GNU Hurd. Using GNU Boot with these configurations
might require some configuration from the user. Also we would need
help from users to report what works and doesn't work or what
workarounds are needed to make them work with GNU Boot.

The cases that are known not to require any configuration might also
work with any GNU/Linux distributions (even the nonfree ones), however
the GNU Boot project doesn't want to force contributors to download or
run nonfree software to test changes, so it relies on voulounteers
already running such distributions to report bugs in case something
doesn't work as it should.

As for other operating systems, there is some documentation on how to
boot some of them (like some BSD operating systems) on the GNU Boot
website, but again we need help from voulonteers already running such
systems to keep the documentation up to date and inform us of what
works and doesn't work.

Also if you want to do such tests, you can open a bug report on the
GNU Boot bug tracker at
@url{https://savannah.gnu.org/bugs/?group=gnuboot}.

@node    GNU Boot images
@section GNU Boot images
@cindex flash images
@cindex image files

In computers people are most familiar with, like laptops, the boot
software (like the @acronym{BIOS, Basic Input/Output System},
@acronym{UEFI, Unified Extensible Firmware Interface} or even GNU
Boot) resides in the boot flash which is a data storage chip inside
the mainboard (@pxref{boot software} for more details).

So to install GNU Boot or to update it, you will need to replace all
the content of this boot flash with GNU Boot or with a newer GNU Boot
version.

To do that, GNU Boot provide @dfn{image files} which are files whose
content is to be written to the boot flash to overwrite everything
that was previously stored by the boot flash (like previous versions
of GNU Boot, the @acronym{BIOS, Basic Input/Output System}, etc).

These files are similar to
@uref{https://en.wikipedia.org/wiki/Disk_image,disk images},
@uref{https://en.wikipedia.org/wiki/ISO_image,ISO images}, or
@uref{https://en.wikipedia.org/wiki/ROM_image,ROM images}.

We also sometime refer to the flash image files as @dfn{flash images}
or simply (GNU Boot) "images" (files).

@node       GNU Boot images types
@subsection GNU Boot images types

For a given computer, GNU Boot provides several images with different
software in it. This enable the users to choose between:

@itemize

@item Two boot software: GRUB or SeaBIOS
      (@acronym{BIOS, Basic Input/Output System} implementation)

@item Various keyboard layouts (colemak, deqwertz, esqwerty,
frazerty, frdvbepo, itqwerty, svenska, trqwerty, ukdvorak, ukqwerty,
usdvorak, usqwerty).

@item Low resolution or high resolution graphics.

@end itemize

If you are a less technical user or helping one, or don't have much
time to configure things, it is a good idea to choose an image with
GRUB, and a keyboard layout of your choice (the resolution is not very
important, but using high resolution looks nicer) as the image with
GRUB doesn't require to do any configuration in the distributions you
want to boot.

Otherwise here are the advantages/disadvantages of each combinaison:

@itemize

@item GRUB with high resolution graphics: Images with GRUB
usually don't require the user to do any configuration of the
distribution. More technical users can also use that to customize the
way the system boots for more security or to support unsual boot
configurations (that are not typically supported by graphical
installers of GNU/Linux distributions), however these more advanced
configurations also come with their set of limitations.

@item SeaBIOS with text-only low resolution: It implements
@acronym{BIOS, Basic Input/Output System} compatibility, so it is very
similar to a nonfree @acronym{BIOS, Basic Input/Output System} but it
require users to modify some settings inside the distribution they
use, otherwise the distribution still boots but usually has a black
screen during the boot (which can be problematic to diagnose a
non-booting distribution). The low resolution increase compatibility
with various software that are typically run at boot like memtest86+
(a software that detects broken RAM chips).

@item GRUB with text-only low resolution: Since these images
boot with GRUB, they also don't require any configuration of the
distribution and more technical users can also use them to customize
the way the system boots. Compared to GRUB images with high resolution
graphics:
    @itemize
    @item the text is bigger and that there is no background picture
    @item since on most supported computers, GRUB images can
          also load and run SeaBIOS (there is a menu entry for
          it), having a text-only low resolution increase the
          compatibility with various boot software.
    @end itemize

@item SeaBIOS with high resolution graphics:

Since these images boot with SeaBIOS they also implement some
@acronym{BIOS, Basic Input/Output System} compatibility, but they also
require users to modify some settings inside the distribution they
use. Compared with SeaBIOS images with text-only low resolution:

    @itemize

    @item they are less compatible with various boot software. This
           can be useful for testing if you contribute to some boot
           software.

    @item since on most supported computers, SeaBIOS images can also
          load and run GRUB (there is a menu entry for it when
          pressing the 'ESC' key at boot), having high resolution
          graphics can make GRUB look nicer.

    @end itemize

@end itemize

@node       GNU Boot images naming
@subsection GNU Boot images naming

Images for specific computers can be found on
@uref{https://ftp.gnu.org/gnu/gnuboot/,the GNU Boot download area} or
in the release/roms directory if you built GNU Boot from source
yourself.

For a given release (or release candidate) like GNU Boot 0.1-rc3, you
can find such files inside the 'roms' directory like
@url{https://ftp.gnu.org/gnu/gnuboot/gnuboot-0.1-rc3/roms/} for GNU
Boot 0.1-rc3.

Inside you have archive files like
@option{gnuboot-0.1-rc3_x200_8mb.tar.xz} that are specific to a
specific computer (here the ThinkPad X200 with 8MiB boot flash).

@pxref{Installing or upgrading GNU Boot images} to understand how to
identify which archive file correspond to which computer.

Inside each archive files, there are many smaller files that are flash
images. @xref{boot software} to understand what a flash image is.

The flash image files correspond to the configurations described in
the @ref{GNU Boot images types}.

So for instance if we have an image named
@option{grub_x200_8mb_corebootfb_usqwerty.rom}, it is meant for a
ThinkPad X200 with 8MiB boot flash, and it uses the GRUB software to
boot, and it is configured to use a QWERTY keyboard layout.

If the image contains @option{seabios} in its file name instead of
@option{grub}, it uses the SeaBIOS software to boot.

The @option{corebootfb} in the file name correspond to the high
resolution graphics described in the previous subsection (@ref{GNU
Boot images types}).

If instead the file has @option{txtmode} in its name, this corresponds
to the text-only low resolution that was also described in the
previous subsection (@ref{GNU Boot images types}).

@node    Flash programmers
@chapter Flash programmers

@node    Practical freedoms with flash programmers
@section Practical freedoms with flash programmers

Getting a compatible flash programmer is not strictly required to use
GNU Boot.

While you need a compatible flash programmer to upgrade from the
nonfree BIOS to GNU Boot on some computers, it is possible to avoid
using one by either getting a compatible laptop with an alternative
boot software (like Canoeboot, Coreboot, GNU Boot, Libreboot, etc)
already installed, or by having someone do the installation for you
(for instance in an install party, or by paying a company to do a
"Installation Service" of an alternative boot software).

Note that these distributions are very different: they also support
computers not supported by GNU Boot, and some of the computers they
support can require nonfree software to boot (making it impossible
and/or undesirable to support these computers in GNU Boot). This also
applies to Canoeboot: while it is 100% free, it doesn't remove all the
nonfree software used during boot on all the computer it supports.

@xref{Other 100% free boot software distributions} and more specifically
@pxref{Software freedom when using other 100% free distributions} for more
details on the freedom implications of using other distributions than
GNU Boot and what it means for hardware support.

However if you know how to disassemble computers supported by GNU
Boot, or that you can get help to do that, it is very strongly advised
to get a compatible flash programmer: with it you will be able to
recover from non-booting computers, and this will enable you to do a
lot more things.

Not only you will be able to test and run previously untested GNU Boot
images, but you will also more easily be able to customize the GNU
Boot images that you use. Since GNU Boot is slowly switching to Guix
to build the software it reuses, and that Guix has lots of ways to
customize software, over time this will also enable you to customize
GNU Boot even more to better suit your needs.

@node    Setup and components needed to use a flash programmer
@section Setup and components needed to use a flash programmer

To reprogram the boot flash of a laptop (for instance the Lenovo
ThinkPad X200), you will need several thing:
@itemize
@item A flash chip programmer
@item A clip or test probe to connect to the boot flash.
@item Some wires (usually female<->female jump wires) to connect
      the flash chip programmer to the clip.
@item An extra computer running GNU/Linux with an USB port that works.
      Any computers should work, however if you care about security, since
      this extra computer will have the ability to modify the GNU Boot image
      that it is reading or writing, you need to be able to trust this extra
      computer, so choose this extra computer accordingly.
@end itemize

To reprogram the boot flash of a desktop, server or workstation
mainboard (for instance the Asus KGPE-D16), you will need several
thing:
@itemize
@item A flash chip programmer
@item A way to extract the boot flash from the mainboard. This can be done
      by hand but if you do that a lot, at the end the pins of the
      boot flash might break. If that happens, new boot flash are
      relatively easy to find. If you want to avoid breaking the chip
      instead, you can either use specialized tools to extract the flash
      chip (like a scalpel, some tweezers for stamps that you can try to put
      between the chip and the socket to remove the chip without bending its
      pins,  or a chip extractor), or you can glue something on top of the
      boot flash for easier extraction.

@item If your programmer doesn't have a socket where to plug the mainboard flash
      chip you will need a breadboard or a boot flash socket, and a way to
      connect the breadboard to the flash programmer (for instance
      female<->female jump wires and some pin rows).

@end itemize

@node    Flash chip package
@section Flash chip package
@cindex @acronym{DIP, Dual in-line package}
@cindex @acronym{WSON, Very-very-thin small-outline no-lead package}

The flash chip use various standard physical and pin layout.

The supported laptops have either a boot flash in the SOIC-8, SOIC-16
or WSON-8 package.

The desktop, servers and workstations mainboard typically use a flash
chip in the DIP-8 package.

@node    Known issues with flash programmers
@section Known issues with flash programmers

@node       Wire length
@subsection Wire length

If the length of the wires connecting the programmer to the chip is
too long, then there will be signal integrity issues and flashprog or
flashrom might not find the boot flash at all.

If that happens, the best fix is to use shorter wires. It is also
sometimes possible to workaround by lowering the speed at which the
programmer talks to the boot flash.

@node       Programmer SPI speed
@subsection Programmer SPI speed

On some flash chip programmers, the speed at which it access the flash
chip can be configured. In this case using the lowest speed possible
can sometimes make a given flash programmer work when there are signal
integrity issues (for instance when the wires connecting the
programmer to the boot flash are too long). How to do that is
documented in the flashrom and flashprog manuals, inside the
programmer sections. Such options have names like spispeed, or
divisor, depending on the programmer being used.

Note that some programmers don't have the ability to lower their
speed.

@node       Lenovo ThinkPad X200 with the MX25L6405D (8MiB)
@subsection Lenovo ThinkPad X200 with the MX25L6405D (8MiB)

For some reasons the signal integrity is bad with the MX25L6405D
(8MiB) boot flash on the Lenovo ThinkPad X200. Because of that it is
advised to have the shortest cables possibles (@pxref{Wire length} for
more details) but also to check the compatibility of various flash
programmers with this boot flash on this laptop. On programmers that
are known to work, you might still need to lower the SPI speed
(@pxref{Programmer SPI speed} for more details) to be able to detect,
read or write the boot flash.

@node    Supported flash programmers
@section Supported flash programmers

@node       OpenMoko Neo1973 Debug board (V2+)
@subsection OpenMoko Neo1973 Debug board (V2+)

The Neo1973 Debug board (V2+) from OpenMoko can be used but it will
require to solder some pin headers on the programmer itself.

If you want to use this programmer to reprogram a laptop boot flash,
you will need to get Female/Female Jumper Wires and a test clip
corresponding to your boot flash (like the Pomona 5252 test clip for
SOIC-16 or the Pomona 5250 test clip for SOIC-8).

If instead you want to reprogram a DIP-8 boot flash, you will need to
get Female/Female Jumper Wires, some PIN headers and a breadboard.

@multitable {Lenovo ThinkPad X200 with MX25L6405D}     {Works?}
@headitem    Boot flash                            @tab Works?
@item        DIP-8 SPI                             @tab Yes
@item        Lenovo ThinkPad X200 with MX25L6405D  @tab No
@end multitable

@node       Vikings CH341a USB Programmer
@subsection Vikings CH341a USB Programmer

The CH341a USB Programmer from Vikings can be used without having to
solder anything.

If you want to use this programmer to reprogram a laptop boot flash,
you will need to get Female/Female Jumper Wires (like the "Jumper Wire
F/F, 20pcs" from Vikings) and a test clip corresponding to your flash
chip (like the "Pomona 5252 IC TEST CLIP SOIC 16 (2 X 8)" or "Pomona
5250 IC TEST CLIP SOIC 8 (2 X 4)" from Vikings).

If instead you want to reprogram a DIP-8 boot flash, nothing special
is needed as this programmer has a builtin socket for them.

@multitable {Lenovo ThinkPad X200 with MX25L6405D}     {works?}
@headitem    Boot flash                            @tab Works?
@item        DIP-8 SPI                             @tab Yes
@item        Lenovo ThinkPad X200 with MX25L6405D  @tab No
@end multitable

@node    Installing or upgrading GNU Boot images
@chapter Installing or upgrading GNU Boot images

GNU Boot provides flash images for specific computers that can be
found on the GNU Boot download area (https://
ftp.gnu.org/gnu/gnuboot/).

But depending on your threat model, it could be a good idea to build
GNU Boot from source yourself instead, to avoid certain security
attacks. @xref{Security features} section for more context with
security and threat models and @ref{Building GNU Boot from source}
for more details about the security attacks mentioned above.

Once GNU Boot is downloaded or built, you will need to understand
which files you need to install or upgrade. @xref{Supported hardware
and configurations} chapter for more details on how to do that.

@node    Installation and upgrade instructions
@section Installation and upgrade instructions

The GNU Boot manual doesn't have well integrated installation or
upgrade instructions yet but some generic installation and upgrade
instructions can be found in the GNU Boot website. We need help to
migrate these instructions in the manual and make them easier to
understand.

@node    Using GNU Boot
@chapter Using GNU Boot

@node    Using GNU Boot with QEMU
@section Using GNU Boot with QEMU

The GNU Boot project also release images for QEMU.

If you just want to try an image to see how it looks like you can use
the following command:

@example
qemu-system-x86_64 -M pc \
-bios grub_qemu-pc_2mb_corebootfb_usqwerty.rom
@end example

Here you need to replace
@emph{grub_qemu-pc_2mb_corebootfb_usqwerty.rom} by the
path to the image you want to try.

For a more complete example, you can look in the GNU Boot source code
as GNU Boot uses QEMU to run some automatic tests that boots Trisquel
11 (aramo).

Also note that the GNU Boot images for QEMU can be useful in some
situations, but it doesn't fully replace tests run on real computers.

For instance a distribution or operating system might work on QEMU but
not work on real hardware due to an incomplete graphic driver for the
real hardware GPU.

@node    Security features
@section Security features
@cindex secure boot
@cindex threat modelling

Note that security is a process. To really make it work you need to
understand various threats and how to respond to them (this is called
@dfn{threat modelling}), so what security feature to use or not to use
depends on your life, use cases, etc.

Also note that in general some security features also have downsides,
such as making it harder to use the computer, making it harder to fix
issues, etc, so not everybody might want these security features.

As for security features typically found in other boot software, some
computers vendor sell computers with what they call @dfn{secure
boot}. When it cannot be turned off, it becomes an anti-feature and
the @uref{https://www.fsf.org/,Free Software Foundation} calls it
@dfn{restricted boot}.

In 2012, the @uref{https://www.fsf.org/,Free Software Foundation}
wrote
@uref{https://www.fsf.org/campaigns/secure-boot-vs-restricted-boot/campaigns/secure-boot-vs-restricted-boot/whitepaper.pdf,a
whitepaper}, on the topic and advised that:

@verbatim
The best solution currently available for operating system distributions
includes:
1. fully supporting user-generated keys, including providing tools and full
documentation for booting and installing both modified and official
versions of the distribution using this method;
2. using a GPLv3-covered bootloader to help protect users against the
dangers of Restricted Boot;
3. avoiding requiring or encouraging users to trust Microsoft or any com-
pany which makes proprietary software; and
4. joining the FSF and the broader free software movement in pressuring
computer distributors to facilitate easy and independent installation of
free software operating systems on any computer.
@end verbatim

GNU Boot supports various security mechanism: GRUB is a GPLv3-covered
bootloader that GNU Boot reuses, and it supports user-generated keys
or other security mechanism that that don't require any signing
keys.

GNU Boot also obviously doesn't Trust keys from companies that make
proprietary software.

At the end when used correctly, the security features provided by GNU
Boot thanks to the software it reuses (like GRUB) can provide similar
or stronger security guarantees than the UEFI secure boot with
different security features that you may or may not want want to use
depending on your threat model.

The GNU Boot Website contains various information on how to use such
security features, but they are also documented in the
@ref{,,,grub,GNU GRUB manual} as well in more details. Since the GRUB
version GNU Boot uses might be older than the online GRUB manual, you
can use Guix to install the manual of older GRUB versions
(@pxref{,,,guix,GNU Guix reference manual} for more details).

All the security mechanism described in the GRUB manual or GNU Boot
website are compatible with users freedom.

@node    Maintenance and repairations
@chapter Maintenance and repairations

@node    Replacing the boot flash on a desktop@comma{} server or workstation
@section Replacing the boot flash on a desktop@comma{} server or workstation

If you break the boot flash (for instance by breaking its pins), it
can easily be replaced.

To do that you need to use a boot flash of the same chip package
(@pxref{Flash chip package} to understand what is a chip package) and
storage size and that uses the SPI protocol (currently all supported
computers use SPI boot flash).

To check the compatibility of the chip with Flashrom you can use the
following command:

@example
flashrom -L
@end example

And here's the command if you use flashprog instead:
@example
flashprog -L
@end example

In the output we can see for instance a 2MiB boot flash that are known
to work well:

@example
flashrom v1.3.0 on Linux 6.11.11-gnu (x86_64)
flashrom is free software, get the source code at https://flashrom.org

Using clock_gettime for delay loops (clk_id: 1, resolution: 1ns).
Supported flash chips (total: 576):

Vendor             Device                          Test  Known   Size   Type
                                                   OK    Broken  [kB]

(P = PROBE, R = READ, E = ERASE, W = WRITE, - = N/A)

[...]
Spansion           S25FL016A                       PREW           2048  SPI
[...]
@end example

Alternatively, if you are able to find one, you can also use the same
boot flash model than the broken one or any of the boot flash that
were shipped with the computer model (@pxref{Supported computers} for
information on that).

You might also need a flash programmer and another computer to put GNU
Boot on the new boot flash (@pxref{Flash programmers} for more
details on flash chip programmers).

@node    Building GNU Boot from source
@chapter Building GNU Boot from source

Currently building GNU Boot flash images on two different computers
will produce slightly different images.

This is a problem as it prevents people from easily verifying that the
official flash images really correspond to the source code published
by GNU Boot, and having the ability for anyone to verify that
increases the security guarantees.

The @uref{https://reproducible-builds.org,Reproducible builds} project
helps publicizing this problem and helps distributions and software to
fix it.

So while GNU Boot also started working to fix this problem the work
just stated and isn't complete yet, so in the meantime if you care
about this type of risks, it might be a good idea to build GNU Boot
from source yourself.

The GNU Boot website has instructions for building GNU Boot at the
following URL:
@url{https://www.gnu.org/software/gnuboot/docs/build/}.

@xref{Authenticating the GNU Boot source code} as GNU Boot has ways to
prevent network attacks from tempering with the souce code you are
downloading.

Note that at the moment, building GNU Boot from tarballs is
unsupported, so you will have to download GNU Boot from git and build
from git.

@node    Authenticating the GNU Boot source code
@section Authenticating the GNU Boot source code

As explained on the
@uref{https://www.gnu.org/software/gnuboot/docs/build/,GNU Boot
build instructions} on the GNU Boot website, to build GNU Boot you
will need to install Guix first (it can be installed on top of another
GNU/Linux distribution).

You can consult either the
@uref{https://www.gnu.org/software/gnuboot/docs/build/,GNU Boot
build instructions} or the @ref{Installation,,,guix,GNU Guix
reference manual} for how to do that.

Once this is done you can download the GNU Boot source code with the
following command and go into it:
@example
$ git clone https://git.savannah.gnu.org/git/gnuboot.git
$ cd gnuboot
@end example

And you can then authenticate the source code with the following guix
command:

@example
$ guix git authenticate \
dde4223088cbfe8a347626638d32902ba2323b25 \
"E23C 26A5 DEEE C5FA 9CDD  D57A 57BC 26A3 6871 16F6" \
-k origin/keyring
@end example

It should then print the following text:
@example
guix git: successfully authenticated commit dde4223088cbfe8a347626638d32902ba2323b25
@end example

@xref{Invoking guix git authenticate,,,guix,GNU Guix manual} or
@uref{https://guix.gnu.org/en/blog/2024/authenticate-your-git-checkouts/,the
Authenticate your Git checkouts! Guix blog post} for more details.

The question that remains is then how to make sure that "E23C 26A5
DEEE C5FA 9CDD D57A 57BC 26A3 6871 16F6" is the right key.

To do that the GnuPG software can help (@pxref{,,,gnupg,its manual}
for now to use it if you are interested) but the solution to this
problem is not technical but social and could require significant time
and effort.

To solve this problem you will need to build some sort of chain of
trust between you and the person who controls the "E23C 26A5 DEEE C5FA
9CDD D57A 57BC 26A3 6871 16F6" key (here Adrien 'neox' Bourmault) with
or without the help of the GnuPG software.

Wikipedia has a bit more information on the problem in its
@uref{https://en.wikipedia.org/wiki/Web_of_trust,Web of trust} article,
and the @uref{https://www.gnupg.org/gph,The GNU Privacy Handbook} has
@uref{https://www.gnupg.org/gph/en/manual/x547.html,a section about
Building your web of trust}, that contains advises on how to do that,
especially in the part about "Key validation".

@node    Helping GNU Boot
@chapter Helping GNU Boot

The GNU Boot project needs help with this manual, specifically on
moving information from the GNU Boot website to this manual.

In general there is also a lot of ways to help the GNU Boot project
(from reviewing website pages for very simple mistakes or outdated
information, testing GNU Boot images, etc).

See the
@uref{https://www.gnu.org/software/gnuboot/git.html,Helping GNU
Boot} page on the GNU Boot website for the areas where we need help
and on how to help practically speaking (how to contact the project,
where to send bug reports, etc).

@node     GNU Free Documentation License
@appendix GNU Free Documentation License

@include fdl-1.3.texi


@node       Concept index
@unnumbered Concept index

@printindex cp

@bye
